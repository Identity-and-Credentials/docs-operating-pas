---
title: Adding Cloud Native Buildpacks (beta)
owner: TAS for VMs
---

You can now add new buildpacks based on the Cloud Native Buildpack (CNB) project to the list of
system buildpacks managed by TAS for VMs.

## <a id="overview"></a> Overview

TAS for VMs 4.0 introduces an option for operators to allow a new slate of buildpacks, based on the
Cloud Native Buildpack project, to be installed with TAS for VMs and managed by the Tanzu
Application Service tile. These buildpacks are still in beta and have some limitations. For details,
see [Limitations of Beta release](#limitations-during-beta-release). **VMware does not recommended
them for production use at this time**. In the future, with further testing and expansion of the
feature set, these buildpacks will be considered Generally Available, and will be supported with the
other buildpacks in TAS for VMs.

One new buildpack is available, the [Web Servers Cloud Native
Buildpack](https://github.com/paketo-buildpacks/web-servers). The Web Servers CNB can be used to
push applications that use NGINX or HTTPD web servers or JavaScript Frontend apps. For the details,
see the [Web Server documentation](https://paketo.io/docs/howto/web-servers).

## <a id="configure-cnbs"></a> Configuring TAS for VMs to include CNBs

Follow these steps to enable the use of the Web Servers Buildpack on your TAS for VMs installation:

1. Open Ops Manager and click the Tanzu Application Service tile.
2. Navigate to the **Cloud Controller** tab.
3. Under **Add beta Cloud Native Buildpacks to system buildpack list**, click **Include Cloud Native
   Buildpacks**.
4. Return to the Installation Dashboard, click **Apply Changes**, and initiate deployment of TAS for
   VMs.

## <a id="remove-cnb"></a> Removing the Web Server Buildpack

1. Open Ops Manager and click the Tanzu Application Service tile.
2. Navigate to the **Cloud Controller** tab.
3. Under **Add beta Cloud Native Buildpacks to system buildpack list**, click **Do not include**.
4. Return to the Installation Dashboard, click **Apply Changes**, and initiate deployment of TAS for
   VMs.
5. Run the following command:

   `cf delete-buildpack web_servers_buildpack`

## <a id="cnb-limitations"></a> Limitations of beta release

The Web Server Buildpack has these known limitations:

* **Procfiles:** Apps with Procfiles do not work correctly with this shim builder. Only the `web`
  process type is honored by Cloud Foundry. This is because the Procfile CNB, which ships as part of
  most meta-buildpacks (or composite buildpacks), manages the Procfile in a way that CF/Diego does
  not handle.
* **Service Bindings:** CNBs were designed with Kubernetes secrets in mind, so service bindings,
  which typically contain credentials, do not work with CNB shims.
* **Activating and Deactivating the feature**: The radio button introduced to the TAS for VMs tile
  in OpsManager adds the Web Servers Buildpack to the list of system buildpacks managed by TAS for
  VMs, so TAS for VMs is responsible for adding, updating, and removing the Web Servers Buildpack
  during deployment when deploying (click the **Apply Changes**). When the radio button is set to
  **Include Cloud Native Buildpacks**, the TAS for VMs tile continues to manage operations to the
  buildpack. However, if an operator first selects **Include Cloud Native Buildpacks**, and then
  later selects **Do not include**, this prevents the Tanzu Application Service tile from making
  updates to the buildpack during subsequent deploy operations. This does not remove the buildpack
  from the list of buildpacks visible to app developers.
